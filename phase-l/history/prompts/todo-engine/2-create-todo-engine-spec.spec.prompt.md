---
id: 2
title: create-todo-engine-spec
stage: spec
date: 2026-02-03
surface: agent
model: claude-sonnet-4-5-20250929
feature: todo-engine
branch: 001-todo-engine
user: CLIMAX
command: /sp.specify
labels: [spec, todo, requirements]
links:
  spec: specs/001-todo-engine/spec.md
  ticket: null
  adr: null
  pr: null
files:
 - specs/001-todo-engine/spec.md
 - specs/001-todo-engine/checklists/requirements.md
tests:
 - none
---

## Prompt

```
Phase I ‚Äì In-Memory Todo Engine

# /sp.specify
Hackathon II ‚Äî Spec-Driven Development
Project: The Evolution of Todo
Phase: I ‚Äî In-Memory Console System

This document defines **what must be built** in Phase I.
All code generated by Claude Code must strictly implement this specification.

---

## 1. System Purpose

The Phase I system is a **single-user, in-memory Todo application** that allows a user to:

- Create tasks
- View tasks
- Update tasks
- Complete tasks
- Delete tasks

This phase establishes the **canonical Todo domain model** that all later phases will extend.

---

## 2. Core Domain

### 2.1 Task Entity

A Task represents a single todo item.

Each Task must contain:

| Field | Type | Description |
|------|------|-------------|
| id | string | Unique immutable identifier |
| title | string | Short human-readable description |
| completed | boolean | Whether the task is done |
| created_at | datetime | When task was created |
| updated_at | datetime | When task was last modified |

---

### 2.2 Task Rules

- Title cannot be empty
- IDs must be unique
- Creation time is immutable
- Updated time changes on any modification
- Completing a task must update `completed` and `updated_at`

---

## 3. Storage Layer

### 3.1 TaskRepository

All tasks must be stored in memory using a repository abstraction.

The repository must support:

- save(task)
- get_by_id(id)
- list_all()
- delete(id)
- update(task)

No direct data structure access is allowed outside this repository.

---

## 4. Service Layer

### 4.1 TodoService

All business logic must be implemented in a TodoService.

It must expose the following operations:

- create_task(title)
- list_tasks()
- complete_task(id)
- update_task(id, new_title)
- delete_task(id)

TodoService must:
- Validate input
- Enforce rules
- Call TaskRepository
- Return domain objects

---

## 5. CLI Interface

The user interacts with the system through commands.

### 5.1 Supported Commands

| Command | Behavior |
|--------|----------|
| add "title" | Creates a new task |
| list | Shows all tasks |
| complete <id> | Marks task as completed |
| update <id> "new title" | Updates task title |
| delete <id> | Deletes a task |
| exit | Ends the program |

---

### 5.2 CLI Rules

- CLI must never directly manipulate tasks
- CLI must only call TodoService
- CLI must catch and display all errors
- CLI must show human-readable output

---

## 6. Error Conditions

The system must handle:

| Case | Behavior |
|------|----------|
| Invalid command | Show help |
| Empty title | Reject |
| Unknown ID | Show error |
| Duplicate ID | Forbidden |
| Crash | Not allowed |

---

## 7. Deterministic Behavior

The same command sequence must always produce the same state and output.

No randomness, no hidden state, no external data.

---

## 8. Testing Requirements

The system must be testable via:

- Running the CLI
- Entering commands
- Observing deterministic output

No manual inspection of memory is allowed.

---

## 9. Upgrade Compatibility

The architecture must allow:

- TaskRep
```

## Response snapshot

Created the complete specification for the Phase I In-Memory Todo Engine. The specification includes:

- 5 user stories with priorities (P1-P2) covering add, list, complete, update, and delete functionality
- 16 functional requirements (FR-001 through FR-016) covering CLI interface, task operations, data integrity, error handling, and deterministic behavior
- 3 key entities (Task, TaskRepository, TodoService)
- 6 success criteria (SC-001 through SC-006) with measurable outcomes
- Comprehensive edge cases addressing invalid commands, non-existent IDs, empty titles, and deletion scenarios

The spec adheres to the constitution by focusing on domain objects, deterministic behavior, CLI interface, and upgrade compatibility. A quality checklist was created and all validation items passed.

## Outcome

- ‚úÖ Impact: Complete specification created for todo engine with all required sections
- üß™ Tests: none
- üìÅ Files: Created specs/001-todo-engine/spec.md and specs/001-todo-engine/checklists/requirements.md
- üîÅ Next prompts: Proceed to planning phase with /sp.plan
- üß† Reflection: Specification aligns with constitution and provides clear requirements for implementation

## Evaluation notes (flywheel)

- Failure modes observed: none
- Graders run and results (PASS/FAIL): PASS - all validation items passed
- Prompt variant (if applicable): N/A
- Next experiment (smallest change to try): Begin implementation planning